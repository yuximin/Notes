# 页面

## 应用首页

TabBar 包含如下页面：

* 明细

* 图表

* 记账（按钮）

* 社区

* 我的

### 明细

1. 标题

2. 月份选择。显示当前月份的收入和支出

3. 功能区按钮（暂不考虑）

4. 明细列表

> 按照时间顺序，显示所有记账信息。最近账单显示在最上面。
> 
> 上拉下拉刷新，超出本月范围会切换到相邻的月份。

### 图表

1. 切换按钮

> 点击之后弹出切换选项，可以选择查看收入还是支出

2. 周期切换

> 一个分段控制器，可以切换 `周`、`月`、`年`。切换到对应周期时，下方显示对应周期时间段的数据。

3. 具体时间段选择

> 对应于 `2` 中的周期，这里选择具体的时间。例如，2022年第1周、2022年第1个月等

4. 图表汇总

> 显示总支出、平均值，并通过折线图显示具体每天或每月的变化。

5. 支出排行榜

> 统计所有分类的收入或支出数据，并对其进行排列显示。

### 记账按钮

点击打开 `记账界面`

### 社区

暂时不做

### 我的

统计个人信息，暂时也可以先不考虑

## 其它子页面

### 记账界面

点击记账时，弹出此界面。

1. 顶部一个分页控制器，用于切换支出还是收入

2. 右上角 `取消`按钮

3. 下方内容是一个分类列表，可以选择具体的分类

4. 选中分类之后，弹出内容输入框。内容输入框分为以下几个部分：

* 顶部区域，包含备注信息输入框和金额显示框

* 下方是按键区域，包含 `0-9` 的数字、小数点、删除键、加号、减号、日期选择按钮、完成按钮

> 点击备注信息输入框时，键盘弹出，顶部区域会被键盘顶出，保证其不会被键盘挡住。
>
> 键盘弹出时，在顶部区域上方会显示一个 `推荐备注信息`，显示历史备注信息。点击选择，直接将对应内容输入备注框内
>
> 点击弹出键盘完成按钮、金额显示框、或除键盘外的其他区域，键盘收起，并且顶部栏回到原始位置
>
> 点击按键区域的数字按钮修改显示的金额
>
> 点击日期按钮，弹出日期选择罗盘，选择相应的日期
>
> 点击完成按钮，销毁当前界面，并插入一条记账数据

### 类别设置

我的 -- 设置 -- 类别设置

1. 左上角返回按钮，点击返回上一页

2. 标题

3. 分类选择器，可选择是支出还是收入。

4. 子分类列表

> 显示子分类的图标和名称。
>
> 左侧为删除按钮，点击后当前 cell 向左滑动，显示出 `删除按钮`，点击删除当前子分类。
>
> 右侧为拖动按钮，点击并拖动可以调整 cell 位置，并改动子分类的优先级。

5. 添加分类按钮，点击弹出 `添加类别` 视图

### 添加类别

1. NavBar，包含返回按钮、标题、完成按钮

2. 内容部分，包含选中的图标和名称输入框

3. 图标选择列表 

# 数据格式

## 账单

| 说明 | 字段 | 数据类型 |
| --- | --- | --- |
| 标识 | id | Int64 |
| 日期 | date | Date |
| 分类 | category | enmu { `支出`, `收入` } |
| 子分类（支持自定义扩充） | subcategory | Subcategory |
| 备注 | description | String |
| 金额 | amount | Int64 |

## 子分类（Subcategory）

| 说明 | 字段 | 数据类型 |
| --- | --- | --- |
| 所属分类 | categoryId | Int64 |
| 子分类标识 | id | Int64 |
| 子分类名称 | name | String |
| 子分类图标 | name | String |

### 数据存储方案

本地存储

#### 方案一

使用沙盒文件

* 优势

> 可以进行 iCloud 同步

#### 方案二

使用数据库，对账单数据进行持久化。

* 优势

> 可以学习数据库的使用