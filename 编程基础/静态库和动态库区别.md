# 静态库和动态库的区别

库是写好的、现有的、成熟的、可复用的代码。

本质上来说，库是一种可执行代码的二进制形式，可以被操作系统载入内存执行。

库有两种：静态库（.a、.lib）和动态库（.so、.dll）

## 静态库

对于静态库，在链接阶段，会将汇编生成的目标文件与引用的库一起链接打包到可执行文件中，因此对应的链接方式称为静态链接。

特点：

- 静态库对函数库的链接是放在编译时期完成的。
- 程序运行期间与函数库没有关联，移植方便。
- 浪费空间和资源。不同程序引用相同静态库，会分别对静态库进行链接，并将其打包进可执行文件中。

## 动态库

动态库在程序编译期间并不会被链接到目标程序，而是在程序运行时才会载入。

动态库很好的解决了静态库空间浪费问题，并且使库代码的更新变得更加便捷。

> 静态库在编译期间，会打包进程序可执行文件中。此时，如果需要对静态库进行更新，则需要重新编译、发布给用户，对整个应用程序进行更新。
>
> 而动态库是在运行时才被载入，与程序可执行文件是分离的，对动态库的更新，用户只需要更新对应的库文件即可。

特点：

- 动态库把对库函数的链接推迟到程序运行时期。
- 避免空间浪费。不同的应用程序如果调用相同的库，那么在内存中只会载入一份共享库的实例。
- 解决静态库更新、部署、发布麻烦的问题。
- 甚至可以真正做到链接载入完全由程序员在程序代码中控制（显示调用）。

